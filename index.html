<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LMS — Початок подорожі</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500&display=swap');

    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      height: 100%;
      background: #000;
      color: #f3eed7;
      font-family: 'Inter', system-ui, sans-serif;
      overflow: hidden;
      cursor: default;
    }

    #container {
      position: fixed;
      inset: 0;
      perspective: 1200px;
      transform-style: preserve-3d;
    }

    .year {
      position: absolute;
      font-family: 'Cormorant Garamond', serif;
      font-weight: 500;
      font-size: clamp(1.1rem, 3.5vw, 3.8rem);
      letter-spacing: 0.04em;
      color: rgba(243, 238, 215, 0.28);
      text-shadow: 0 0 20px rgba(0,0,0,0.9);
      pointer-events: none;
      will-change: transform, opacity;
      transform-style: preserve-3d;
      white-space: nowrap;
    }

    .content {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      z-index: 10;
      padding: 5vw;
      transition: opacity 1.4s ease, transform 1.4s cubic-bezier(0.2, 0.9, 0.1, 1);
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(3.2rem, 9vw, 9rem);
      font-weight: 500;
      margin: 0 0 1.2rem;
      letter-spacing: 0.02em;
      line-height: 0.95;
    }

    .subtitle {
      font-size: clamp(1.1rem, 2.2vw, 1.5rem);
      max-width: 720px;
      opacity: 0.85;
      line-height: 1.55;
      margin: 0 0 3rem;
    }

    button {
      font-family: 'Inter', sans-serif;
      font-size: 1rem;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      padding: 1rem 3rem;
      background: transparent;
      color: #f3eed7;
      border: 1px solid rgba(243, 238, 215, 0.35);
      cursor: pointer;
      transition: all 0.4s ease;
    }

    button:hover {
      border-color: #f3eed7;
      background: rgba(243, 238, 215, 0.06);
    }

    .fade-overlay {
      position: fixed;
      inset: 0;
      background: #000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 1.6s ease;
      z-index: 20;
    }

    body.flying .content {
      opacity: 0;
      transform: translateY(-8%) scale(0.92);
    }

    body.flying .fade-overlay {
      opacity: 1;
    }
  </style>
</head>
<body>

  <div id="container"></div>

  <div class="content">
    <h1>Навчання — це подорож</h1>
    <p class="subtitle">
      Через роки знань, помилок і відкриттів.<br>
      Але час спливає. Почніть, поки не стало запізно.
    </p>
    <button id="startBtn">ПОЧАТИ</button>
  </div>

  <div class="fade-overlay" id="fade"></div>

  <script>
    const container = document.getElementById('container');
    const startBtn = document.getElementById('startBtn');
    const fade = document.getElementById('fade');

    const YEARS_COUNT = 120;
    const years = [];
    const now = new Date().getFullYear();
    const minYear = 1800;
    const maxYear = now + 20;

    for (let i = 0; i < YEARS_COUNT; i++) {
      const el = document.createElement('div');
      el.className = 'year';
      const year = Math.floor(Math.random() * (maxYear - minYear + 1)) + minYear;
      el.textContent = year;
      container.appendChild(el);

      const angle = Math.random() * Math.PI * 2;
      const radius = 300 + Math.random() * 800;
      const x = Math.cos(angle) * radius;
      const y = (Math.random() - 0.5) * 600;
      const z = (Math.random() - 0.5) * 1000 - 400;

      const data = {
        el,
        baseX: x,
        baseY: y,
        baseZ: z,
        x, y, z,
        vx: (Math.random() - 0.5) * 0.4,
        vy: (Math.random() - 0.5) * 0.3,
        vz: (Math.random() - 0.5) * 0.25,
        scale: 0.8 + Math.random() * 0.6,
        opacity: 0.12 + Math.random() * 0.22
      };

      years.push(data);
      el.style.opacity = data.opacity;
      updateYearTransform(data);
    }

    function updateYearTransform(d) {
      d.el.style.transform = `
        translate3d(${d.x}px, ${d.y}px, ${d.z}px)
        scale(${d.scale})
      `;
    }

    let flying = false;
    let flightStart = 0;

    function animate() {
      if (!flying) {
        // Повільний дрейф
        years.forEach(d => {
          d.x += d.vx;
          d.y += d.vy;
          d.z += d.vz;

          // Легке повернення до центру (щоб не розліталися надто далеко)
          d.x += (d.baseX - d.x) * 0.0008;
          d.y += (d.baseY - d.y) * 0.0008;
          d.z += (d.baseZ - d.z) * 0.0008;

          updateYearTransform(d);
        });
      } else {
        // Політ у камеру
        const t = (performance.now() - flightStart) / 1600; // ~1.6s тривалість
        if (t > 1) {
          window.location.href = './main.html#overview';
          return;
        }

        const ease = t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
        const pushZ = ease * 2200; // сильний рух вперед

        years.forEach(d => {
          d.x += (0 - d.x) * ease * 0.8; // до центру по X/Y
          d.y += (0 - d.y) * ease * 0.8;
          d.z += pushZ + d.vz * 30;     // основний поштовх вперед

          d.scale += ease * 2.5;        // збільшення розміру
          d.opacity = Math.max(0, d.opacity - ease * 0.6);

          updateYearTransform(d);
        });

        // Легкий mouse parallax під час польоту (опціонально)
        // const mx = (mouseX - 0.5) * 60 * (1 - ease);
        // const my = (mouseY - 0.5) * 40 * (1 - ease);
        // container.style.transform = `translate3d(${mx}px, ${my}px, 0)`;
      }

      requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);

    // Mouse parallax на вступі (дуже легкий, щоб не відволікати)
    let mouseX = 0.5, mouseY = 0.5;
    window.addEventListener('mousemove', e => {
      if (flying) return;
      mouseX = e.clientX / window.innerWidth;
      mouseY = e.clientY / window.innerHeight;
      const px = (mouseX - 0.5) * 40;
      const py = (mouseY - 0.5) * 30;
      container.style.transform = `translate3d(${px}px, ${py}px, 0) rotateX(${(mouseY-0.5)*-4}deg) rotateY(${(mouseX-0.5)*6}deg)`;
    });

    startBtn.addEventListener('click', () => {
      if (flying) return;
      flying = true;
      flightStart = performance.now();
      document.body.classList.add('flying');
      fade.style.transition = 'opacity 1.8s ease';
      setTimeout(() => fade.style.opacity = 1, 400);
    });
  </script>
</body>
</html>