<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LMS — Початок</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap');

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{overflow:hidden;background:#000;color:#f3eed7}

    #wrap{
      position:fixed; inset:0;
      background:
        radial-gradient(1200px 700px at 50% 45%,
          rgba(70,85,180,.22),
          rgba(10,10,18,.92) 60%,
          #000 100%);
    }
    canvas{display:block;width:100%;height:100%}

    #vignette{
      position:fixed; inset:-2px;
      background: radial-gradient(1200px 800px at 50% 50%, transparent 42%, rgba(0,0,0,.68) 100%);
      pointer-events:none;
      z-index:1;
      opacity:.85;
    }

    .intro{
      position:fixed; inset:0;
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      text-align:center;
      padding:6vw;
      z-index:2;
      pointer-events:none;
      transition: opacity 1.2s ease;
    }
    .intro::before{
      content:"";
      position:absolute;
      width:min(980px,92vw);
      height:min(520px,60vh);
      border-radius:999px;
      background: radial-gradient(closest-side, rgba(0,0,0,.58), rgba(0,0,0,0));
      z-index:-1;
    }

    h1{
      margin:0 0 1.1rem;
      font-family:"Cormorant Garamond", serif;
      font-weight:500;
      font-size:clamp(3.0rem, 7.6vw, 6.8rem);
      line-height:.92;
      letter-spacing:-0.01em;
      color:rgba(243,238,215,.96);
      text-shadow: 0 24px 80px rgba(0,0,0,.55);
    }
    .subtitle{
      margin:0 0 2.4rem;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size:clamp(1.05rem,2.2vw,1.5rem);
      opacity:.86;
      line-height:1.55;
      max-width:820px;
    }

    #startBtn{
      pointer-events:auto;
      padding:1rem 3.5rem;
      font-size:.95rem;
      letter-spacing:.32em;
      text-transform:uppercase;
      background:transparent;
      border:1.5px solid rgba(243,238,215,.55);
      color:#f3eed7;
      cursor:pointer;
      transition:transform .35s ease, background .35s ease, border-color .35s ease, opacity .35s ease;
    }
    #startBtn:hover{
      border-color: rgba(243,238,215,.92);
      background: rgba(243,238,215,.08);
      transform: translateY(-3px);
    }
    #startBtn:active{ transform: translateY(-1px) scale(.99); }

    .hint{
      position:fixed; left:18px; bottom:14px;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      font-size:12px; opacity:.55;
      z-index:3;
      user-select:none;
      pointer-events:none;
    }

    #fade{
      position:fixed; inset:0;
      background:#000;
      opacity:0;
      transition: opacity 1.1s ease;
      pointer-events:none;
      z-index:4;
    }

    body.flying .intro{opacity:0}
  </style>
</head>

<body>
  <div id="wrap"></div>
  <div id="vignette"></div>

  <div class="intro">
    <h1>Навчання — це подорож</h1>
    <p class="subtitle">Крізь час і знання</p>
    <button id="startBtn">ПОЧАТИ</button>
  </div>

  <div class="hint">Рухай мишкою → відчуєш глибину (це тестовий етап)</div>
  <div id="fade"></div>

  <script type="module">
    import * as THREE from "https://unpkg.com/three@0.161.0/build/three.module.js";

    const wrap = document.getElementById("wrap");
    const btn  = document.getElementById("startBtn");
    const fade = document.getElementById("fade");

    // Renderer
    const renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    wrap.appendChild(renderer.domElement);

    // Scene + Fog (дає глибину як у референсі)
    const scene = new THREE.Scene();
    scene.fog = new THREE.Fog(0x000000, 10, 80);

    // Camera
    const camera = new THREE.PerspectiveCamera(
      55,
      window.innerWidth / window.innerHeight,
      0.1,
      200
    );
    camera.position.set(0, 0, 18);

    // ===== Test field: "dust / stars" to SEE depth + parallax =====
    // Це тимчасово. На наступному кроці замінимо на "роки".
    const STAR_COUNT = 850;
    const positions = new Float32Array(STAR_COUNT * 3);

    for (let i = 0; i < STAR_COUNT; i++){
      const ix = i * 3;
      // ширина/висота
      positions[ix + 0] = (Math.random() - 0.5) * 42;   // x
      positions[ix + 1] = (Math.random() - 0.5) * 24;   // y
      // вглиб (негатив), щоб було "перед нами" в просторі
      positions[ix + 2] = -Math.random() * 120;         // z
    }

    const starGeo = new THREE.BufferGeometry();
    starGeo.setAttribute("position", new THREE.BufferAttribute(positions, 3));

    const starMat = new THREE.PointsMaterial({
      color: 0xf3eed7,
      size: 0.045,
      transparent: true,
      opacity: 0.22,
      depthWrite: false
    });

    const stars = new THREE.Points(starGeo, starMat);
    scene.add(stars);

    // tiny reference "dot" in the depth (щоб точно було видно lookAt)
    const dot = new THREE.Mesh(
      new THREE.SphereGeometry(0.12, 16, 16),
      new THREE.MeshBasicMaterial({ color: 0xffffff, transparent:true, opacity:0.14 })
    );
    dot.position.set(0, 0, -22);
    scene.add(dot);

    // ===== Mouse -> camera look (важливо: дивимось, а не рухаємо обʼєкти) =====
    let mx = 0, my = 0;
    window.addEventListener("mousemove", (e)=>{
      mx = (e.clientX / window.innerWidth  - 0.5);
      my = (e.clientY / window.innerHeight - 0.5);
    });

    // ===== Button (поки просто переходить, без "прольоту") =====
    let flying = false;
    btn.addEventListener("click", ()=>{
      if (flying) return;
      flying = true;
      document.body.classList.add("flying");
      fade.style.opacity = "1";
      btn.style.pointerEvents = "none";
      setTimeout(()=>{ location.href = "./main.html#overview"; }, 850);
    });

    function animate(){
      const t = performance.now() * 0.001;

      // чутливість миші (щоб ти точно бачив)
      const tx = mx * 3.2;
      const ty = -my * 2.1;

      // плавний lookAt
      camera.lookAt(tx, ty, -18);

      // дуже легкий "breathing" в зірках (щоб сцена була живою)
      stars.rotation.z = Math.sin(t * 0.15) * 0.02;

      // маркер дихає
      dot.material.opacity = 0.10 + (Math.sin(t * 1.8) + 1) * 0.03;

      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);

    window.addEventListener("resize", ()=>{
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    });
  </script>
</body>
</html>
