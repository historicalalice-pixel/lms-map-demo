<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LMS — Початок</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500&display=swap');

    * { margin:0; padding:0; box-sizing:border-box; }
    html, body { height:100%; }
    body{
      background:#000;
      color:#f3eed7;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow:hidden;
    }

    /* 3D сцена */
    #scene{
      position:fixed;
      inset:0;
      perspective:1800px;
      background: radial-gradient(circle at 50% 40%, #0f0f0f 0%, #000 75%);
      overflow:hidden;
    }

    /* центр + preserve-3d */
    #cloud{
      position:absolute;
      left:50%;
      top:50%;
      transform-style:preserve-3d;
      will-change:transform;
    }

    .year{
      position:absolute;
      left:0; top:0;
      transform-style:preserve-3d;
      will-change:transform, opacity, filter;

      font-family:'Cormorant Garamond', serif;
      font-weight:400;
      font-size:clamp(1.1rem, 2.8vw, 2.8rem);

      color: rgba(243, 238, 215, 0.55);
      text-shadow: 0 0 16px rgba(243,238,215,0.25);
      pointer-events:none;
      user-select:none;

      /* число центрується в своїй точці */
      transform: translate3d(0,0,0) translate(-50%,-50%);
    }

    .intro{
      position:relative;
      z-index:10;
      height:100%;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:4vw;
      transition: opacity 1.2s ease;
      will-change:opacity;
    }

    /* ✅ менший заголовок */
    h1{
      font-family:'Cormorant Garamond', serif;
      font-size: clamp(2.4rem, 6vw, 5.4rem);
      font-weight:500;
      line-height:0.92;
      margin-bottom:1.1rem;
      letter-spacing:-0.01em;
    }

    .subtitle{
      font-size:clamp(1.05rem, 2.2vw, 1.45rem);
      max-width:720px;
      opacity:0.88;
      line-height:1.55;
      margin-bottom:3rem;
    }

    button{
      padding:1rem 3.5rem;
      font-size:1rem;
      letter-spacing:0.3em;
      text-transform:uppercase;
      background:transparent;
      border:1.5px solid rgba(243,238,215,0.55);
      color:#f3eed7;
      cursor:pointer;
      transition: all .35s ease;
    }
    button:hover{
      border-color:#f3eed7;
      background: rgba(243,238,215,0.08);
      transform: translateY(-3px);
    }
    button:active{ transform: translateY(-1px); }
    button[disabled]{ opacity:.55; cursor:default; }

    #fade{
      position:fixed;
      inset:0;
      background:#000;
      opacity:0;
      transition: opacity 1.3s ease;
      z-index:20;
      pointer-events:none;
    }

    body.flying .intro{ opacity:0; }
  </style>
</head>
<body>

  <div id="scene">
    <div id="cloud"></div>
  </div>

  <div class="intro">
    <h1>Навчання — це подорож</h1>
    <p class="subtitle">Крізь час і знання</p>
    <button id="startBtn">ПОЧАТИ</button>
  </div>

  <div id="fade"></div>

  <script>
    const cloud = document.getElementById('cloud');
    const btn = document.getElementById('startBtn');
    const fade = document.getElementById('fade');

    const rand  = (a,b)=> a + Math.random()*(b-a);
    const clamp = (v,a,b)=> Math.max(a, Math.min(b,v));
    const easeInOutCubic = t => t < .5 ? 4*t*t*t : 1 - Math.pow(-2*t+2,3)/2;

    // ✅ реакція на мишку
    let mx = 0, my = 0;
    window.addEventListener('mousemove', (e)=>{
      mx = (e.clientX / window.innerWidth - 0.5);
      my = (e.clientY / window.innerHeight - 0.5);
    });

    const years = [];
    const now = new Date().getFullYear();
    const minY = 1700;
    const maxY = now + 40;

    // генерація років навколо центру
    const COUNT = 90;
    for (let i=0; i<COUNT; i++){
      const el = document.createElement('div');
      el.className = 'year';
      el.textContent = Math.floor(rand(minY, maxY+1));
      cloud.appendChild(el);

      const a  = rand(0, Math.PI*2);
      const r  = rand(120, 720);
      const x0 = Math.cos(a)*r + rand(-180,180);
      const y0 = Math.sin(a)*r*0.65 + rand(-140,140);
      const z0 = rand(-900, 240);

      const p = {
        el,
        x0, y0, z0,
        x: x0, y: y0, z: z0,

        // ✅ сильніший рух
        vx: rand(-0.22, 0.22),
        vy: rand(-0.18, 0.18),
        vz: rand(-0.10, 0.10),

        o: rand(0.38, 0.78)
      };
      years.push(p);

      el.style.opacity = p.o.toFixed(3);
      el.style.filter = 'none';
      el.style.transform = `translate3d(${p.x}px, ${p.y}px, ${p.z}px) translate(-50%,-50%)`;
    }

    let flying = false;
    let startTime = 0;

    // політ
    const FLIGHT_MS = 1400;
    const Z_BOOST = 2600;
    const PULL = 0.16;

    function animate(ts){
      if (!flying){
        // ✅ паралакс/камера в idle
        const camX = mx * 60;
        const camY = my * 40;
        const rotX = (-my * 6);
        const rotY = ( mx * 8);
        cloud.style.transform =
          `translate3d(${camX}px, ${camY}px, 0) rotateX(${rotX}deg) rotateY(${rotY}deg)`;

        // ✅ помітніший дрейф
        for (const p of years){
          p.x += p.vx * 1.25;
          p.y += p.vy * 1.25;
          p.z += p.vz * 1.10;

          // легке повернення до стартових точок (щоб не "попливли" назавжди)
          p.x -= (p.x - p.x0) * 0.002;
          p.y -= (p.y - p.y0) * 0.002;
          p.z -= (p.z - p.z0) * 0.002;

          p.el.style.opacity = p.o.toFixed(3);
          p.el.style.filter = 'none';
          p.el.style.transform = `translate3d(${p.x}px, ${p.y}px, ${p.z}px) translate(-50%,-50%)`;
        }

        requestAnimationFrame(animate);
        return;
      }

      const t = clamp((ts - startTime) / FLIGHT_MS, 0, 1);
      const e = easeInOutCubic(t);

      // ✅ паралакс/камера у польоті теж
      const camX = mx * 30;
      const camY = my * 22;
      const rotX = (-my * 6) + (-6 * e);
      const rotY = ( mx * 8) + ( 8 * e);
      cloud.style.transform =
        `translate3d(${camX}px, ${camY}px, ${-(e*520)}px) rotateX(${rotX}deg) rotateY(${rotY}deg)`;

      for (const p of years){
        const x = p.x0 * (1 - e*PULL);
        const y = p.y0 * (1 - e*PULL);
        const z = p.z0 + (Z_BOOST * e);

        const blur = e * 1.2;
        const op = Math.max(0, p.o - e*0.55);

        p.el.style.opacity = op.toFixed(3);
        p.el.style.filter = `blur(${blur.toFixed(2)}px)`;
        p.el.style.transform = `translate3d(${x}px, ${y}px, ${z}px) translate(-50%,-50%)`;
      }

      // fade пізніше, щоб проліт було видно
      if (t > 0.62) fade.style.opacity = String((t - 0.62) / 0.38);

      if (t >= 1){
        location.href = './main.html#overview';
        return;
      }

      requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);

    btn.addEventListener('click', ()=>{
      if (flying) return;
      flying = true;
      startTime = performance.now();
      document.body.classList.add('flying');
      btn.disabled = true;
    });
  </script>

</body>
</html>
