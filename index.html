<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LMS — Початок</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500&display=swap');

    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      height: 100vh;
      background: #000;
      color: #f3eed7;
      font-family: 'Inter', sans-serif;
      overflow: hidden;
    }

    #scene {
      position: fixed;
      inset: 0;
      perspective: 2400px;
      background: radial-gradient(circle at 50% 40%, #111 0%, #000 80%);
    }

    .year {
      position: absolute;
      left: 50%; top: 50%;
      font-family: 'Cormorant Garamond', serif;
      font-size: clamp(2rem, 6vw, 7.5rem);
      font-weight: 500;
      color: rgba(243, 238, 215, 0.65);
      text-shadow: 0 0 25px rgba(243,238,215,0.5);
      pointer-events: none;
      transform: translate(-50%, -50%);
      will-change: transform, opacity, filter;
    }

    .intro {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      z-index: 10;
      transition: opacity 1.4s ease;
    }

    h1 { font-size: clamp(5rem, 13vw, 15rem); margin-bottom: 1.5rem; line-height: 0.88; }
    .subtitle { font-size: 1.6rem; max-width: 820px; opacity: 0.9; margin-bottom: 4rem; }

    button {
      padding: 1.4rem 4.5rem;
      font-size: 1.2rem;
      letter-spacing: 0.4em;
      text-transform: uppercase;
      background: transparent;
      border: 2px solid #f3eed7;
      color: #f3eed7;
      cursor: pointer;
    }

    #fade {
      position: fixed;
      inset: 0;
      background: #000;
      opacity: 0;
      transition: opacity 1.6s ease;
      z-index: 20;
    }

    body.flying .intro { opacity: 0; }
  </style>
</head>
<body>

  <div id="scene"></div>

  <div class="intro">
    <h1>Навчання — це подорож</h1>
    <p class="subtitle">Крізь час і знання</p>
    <button id="go">ПОЧАТИ</button>
  </div>

  <div id="fade"></div>

  <script>
    const scene = document.getElementById('scene');
    const btn = document.getElementById('go');
    const fade = document.getElementById('fade');

    const years = [];
    const now = new Date().getFullYear();

    // Створюємо дати
    for (let i = 0; i < 180; i++) {
      const el = document.createElement('div');
      el.className = 'year';
      el.textContent = 1650 + Math.floor(Math.random() * (now + 80 - 1650));
      scene.appendChild(el);

      years.push({
        el: el,
        x: (Math.random() - 0.5) * 2400,
        y: (Math.random() - 0.5) * 1800,
        z: (Math.random() - 0.5) * 2800 - 900,
        vx: (Math.random() - 0.5) * 3,
        vy: (Math.random() - 0.5) * 2.5,
        vz: (Math.random() - 0.5) * 2
      });
    }

    let flying = false;
    let startTs = 0;

    function animate(ts) {
      if (!flying) {
        years.forEach(d => {
          d.x += d.vx;
          d.y += d.vy;
          d.z += d.vz;
          d.el.style.transform = `translate3d(${d.x}px, ${d.y}px, ${d.z}px)`;
        });
      } else {
        const progress = Math.min((ts - startTs) / 1200, 1); // 1.2 секунди

        years.forEach(d => {
          d.x = d.x * (1 - progress * 2.8);   // сильно до центру
          d.y = d.y * (1 - progress * 2.8);
          d.z += 5200 * progress;             // дуже сильний політ уперед

          const scale = 1 + progress * 6;
          const blur = progress * 18;

          d.el.style.transform = `translate3d(${d.x}px, ${d.y}px, ${d.z}px) scale(${scale})`;
          d.el.style.opacity = Math.max(0, 0.65 - progress * 1.8);
          d.el.style.filter = `blur(${blur}px)`;
        });

        // Камера теж летить уперед
        scene.style.transform = `translateZ(${-900 * progress}px)`;

        if (progress >= 1) {
          location.replace('./main.html#overview');
        }
      }

      requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);

    btn.addEventListener('click', () => {
      if (flying) return;
      flying = true;
      startTs = performance.now();
      document.body.classList.add('flying');
      fade.style.opacity = '1';
      
      console.log("%c=== ПОЛІТ ЗАПУЩЕНО ===", "color:#0f0; font-size:16px");
    });
  </script>
</body>
</html>